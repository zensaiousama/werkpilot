<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Offerte - {{quote_number}}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      color: #333333;
      font-size: 13px;
      line-height: 1.6;
      background: #ffffff;
    }
    .page {
      width: 210mm;
      min-height: 297mm;
      padding: 30mm 25mm 40mm 25mm;
      margin: 0 auto;
      position: relative;
    }
    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 3px solid #00d4ff;
    }
    .logo {
      font-size: 32px;
      font-weight: 700;
      color: #1a1a2e;
      letter-spacing: 2px;
    }
    .logo-accent {
      color: #00d4ff;
    }
    .company-info {
      text-align: right;
      font-size: 11px;
      color: #666666;
      line-height: 1.5;
    }
    /* Quote Header */
    .quote-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 36px;
    }
    .client-info {
      flex: 1;
    }
    .client-info h3 {
      font-size: 11px;
      text-transform: uppercase;
      color: #999999;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }
    .client-name {
      font-size: 18px;
      font-weight: 600;
      color: #1a1a2e;
      margin-bottom: 4px;
    }
    .quote-meta {
      text-align: right;
    }
    .quote-meta table {
      margin-left: auto;
    }
    .quote-meta td {
      padding: 3px 0;
      font-size: 12px;
    }
    .quote-meta td:first-child {
      color: #999999;
      padding-right: 16px;
      text-align: right;
    }
    .quote-meta td:last-child {
      font-weight: 600;
    }
    .quote-number {
      font-size: 16px;
      font-weight: 700;
      color: #00d4ff;
    }
    /* Package Section */
    .section-title {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a2e;
      margin: 32px 0 16px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid #eeeeee;
    }
    .package-name {
      font-size: 20px;
      font-weight: 700;
      color: #1a1a2e;
      margin-bottom: 8px;
    }
    .package-description {
      color: #666666;
      margin-bottom: 16px;
    }
    /* Line Items Table */
    .items-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    .items-table th {
      background-color: #1a1a2e;
      color: #ffffff;
      padding: 10px 12px;
      text-align: left;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .items-table th:last-child {
      text-align: right;
    }
    .items-table td {
      padding: 10px 12px;
      border-bottom: 1px solid #eeeeee;
      vertical-align: top;
    }
    .items-table td:last-child {
      text-align: right;
      white-space: nowrap;
    }
    .items-table tr:nth-child(even) {
      background-color: #fafafa;
    }
    .item-name {
      font-weight: 600;
    }
    .item-description {
      font-size: 11px;
      color: #888888;
      margin-top: 2px;
    }
    /* Includes List */
    .includes-list {
      list-style: none;
      padding: 0;
      margin: 12px 0;
      columns: 2;
      column-gap: 24px;
    }
    .includes-list li {
      padding: 4px 0 4px 20px;
      position: relative;
      font-size: 12px;
      break-inside: avoid;
    }
    .includes-list li::before {
      content: "\2713";
      position: absolute;
      left: 0;
      color: #00d4ff;
      font-weight: 700;
    }
    /* Totals */
    .totals-section {
      margin-top: 24px;
      display: flex;
      justify-content: flex-end;
    }
    .totals-table {
      width: 280px;
      border-collapse: collapse;
    }
    .totals-table td {
      padding: 6px 0;
      font-size: 13px;
    }
    .totals-table td:first-child {
      color: #666666;
    }
    .totals-table td:last-child {
      text-align: right;
      font-weight: 500;
    }
    .totals-table .total-row td {
      padding-top: 12px;
      border-top: 2px solid #1a1a2e;
      font-size: 18px;
      font-weight: 700;
      color: #1a1a2e;
    }
    .totals-table .discount td {
      color: #27ae60;
    }
    /* Timeline */
    .timeline {
      margin: 32px 0;
      display: flex;
      gap: 0;
    }
    .timeline-step {
      flex: 1;
      text-align: center;
      position: relative;
      padding: 0 8px;
    }
    .timeline-step::after {
      content: "";
      position: absolute;
      top: 14px;
      right: -50%;
      width: 100%;
      height: 2px;
      background: #eeeeee;
      z-index: 0;
    }
    .timeline-step:last-child::after {
      display: none;
    }
    .timeline-dot {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #00d4ff;
      color: #ffffff;
      font-weight: 700;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 1;
      margin-bottom: 8px;
    }
    .timeline-label {
      font-size: 11px;
      color: #666666;
    }
    .timeline-date {
      font-size: 10px;
      color: #999999;
      margin-top: 2px;
    }
    /* Payment Terms */
    .payment-grid {
      display: flex;
      gap: 16px;
      margin: 16px 0;
    }
    .payment-block {
      flex: 1;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }
    .payment-percent {
      font-size: 24px;
      font-weight: 700;
      color: #00d4ff;
    }
    .payment-label {
      font-size: 11px;
      color: #666666;
      margin-top: 4px;
    }
    .payment-amount {
      font-size: 14px;
      font-weight: 600;
      margin-top: 4px;
    }
    /* Terms */
    .terms {
      margin-top: 32px;
      padding-top: 20px;
      border-top: 1px solid #eeeeee;
      font-size: 11px;
      color: #888888;
      line-height: 1.5;
    }
    .terms h4 {
      color: #666666;
      margin-bottom: 8px;
      font-size: 12px;
    }
    .terms ul {
      padding-left: 16px;
      margin-bottom: 12px;
    }
    /* Signature */
    .signature-section {
      margin-top: 48px;
      display: flex;
      justify-content: space-between;
    }
    .signature-block {
      width: 45%;
    }
    .signature-line {
      border-top: 1px solid #cccccc;
      margin-top: 40px;
      padding-top: 8px;
      font-size: 11px;
      color: #999999;
    }
    /* Footer */
    .page-footer {
      position: absolute;
      bottom: 20mm;
      left: 25mm;
      right: 25mm;
      text-align: center;
      font-size: 10px;
      color: #bbbbbb;
      border-top: 1px solid #eeeeee;
      padding-top: 12px;
    }

    @media print {
      .page {
        margin: 0;
        padding: 20mm;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Header -->
    <div class="header">
      <div>
        <div class="logo">Werk<span class="logo-accent">pilot</span></div>
        <div style="font-size: 11px; color: #888; margin-top: 4px;">Digitale Loesungen fuer Schweizer KMU</div>
      </div>
      <div class="company-info">
        Werkpilot GmbH<br>
        {{company_address}}<br>
        {{company_email}}<br>
        {{company_website}}<br>
        UID: {{company_uid}}
      </div>
    </div>

    <!-- Quote Header -->
    <div class="quote-header">
      <div class="client-info">
        <h3>Offerte an</h3>
        <div class="client-name">{{client_company}}</div>
        <div>{{client_contact}}</div>
        <div>{{client_address}}</div>
        <div>{{client_email}}</div>
      </div>
      <div class="quote-meta">
        <table>
          <tr>
            <td>Offerte Nr.</td>
            <td class="quote-number">{{quote_number}}</td>
          </tr>
          <tr>
            <td>Datum</td>
            <td>{{quote_date}}</td>
          </tr>
          <tr>
            <td>Gueltig bis</td>
            <td>{{valid_until}}</td>
          </tr>
          <tr>
            <td>Bearbeiter</td>
            <td>{{prepared_by}}</td>
          </tr>
        </table>
      </div>
    </div>

    <!-- Package -->
    <div class="section-title">Gewahltes Paket</div>
    <div class="package-name">{{package_name}}</div>
    <div class="package-description">{{package_description}}</div>

    <ul class="includes-list">
      {{package_includes}}
    </ul>

    <!-- Line Items -->
    <div class="section-title">Positionen</div>
    <table class="items-table">
      <thead>
        <tr>
          <th style="width: 50%;">Position</th>
          <th>Menge</th>
          <th>Einzelpreis</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        {{line_items}}
      </tbody>
    </table>

    <!-- Totals -->
    <div class="totals-section">
      <table class="totals-table">
        <tr>
          <td>Zwischensumme</td>
          <td>CHF {{subtotal}}</td>
        </tr>
        {{discount_row}}
        <tr>
          <td>MwSt. (8.1%)</td>
          <td>CHF {{vat_amount}}</td>
        </tr>
        <tr class="total-row">
          <td>Total</td>
          <td>CHF {{total}}</td>
        </tr>
      </table>
    </div>

    <!-- Timeline -->
    <div class="section-title">Zeitplan</div>
    <div class="timeline">
      {{timeline_steps}}
    </div>

    <!-- Payment Terms -->
    <div class="section-title">Zahlungskonditionen</div>
    <div class="payment-grid">
      <div class="payment-block">
        <div class="payment-percent">40%</div>
        <div class="payment-label">Anzahlung</div>
        <div class="payment-amount">CHF {{deposit_amount}}</div>
      </div>
      <div class="payment-block">
        <div class="payment-percent">30%</div>
        <div class="payment-label">Meilenstein</div>
        <div class="payment-amount">CHF {{milestone_amount}}</div>
      </div>
      <div class="payment-block">
        <div class="payment-percent">30%</div>
        <div class="payment-label">Abschluss</div>
        <div class="payment-amount">CHF {{completion_amount}}</div>
      </div>
    </div>

    <!-- Signature -->
    <div class="signature-section">
      <div class="signature-block">
        <div class="signature-line">Werkpilot GmbH / Datum</div>
      </div>
      <div class="signature-block">
        <div class="signature-line">{{client_company}} / Datum</div>
      </div>
    </div>

    <!-- Terms -->
    <div class="terms">
      <h4>Bedingungen</h4>
      <ul>
        <li>Diese Offerte ist gueltig bis {{valid_until}}</li>
        <li>Zahlbar innerhalb von 30 Tagen nach Rechnungsstellung</li>
        <li>Es gelten unsere allgemeinen Geschaeftsbedingungen: {{terms_url}}</li>
        <li>{{ab_test_note}}</li>
      </ul>
    </div>

    <!-- Footer -->
    <div class="page-footer">
      Werkpilot GmbH | {{company_website}} | {{company_email}} | UID: {{company_uid}}
    </div>
  </div>
</body>
</html>
